language: haskell
ghc:
- 7.8
env:
   secure: "oP0m1VyyU1YFimnzAt1r3hljj6+UcMhJKaU/sRbdzFbAjivM693kGVk+AYJTM77/EAthKLNZhrk76Gg+8/4H7YS/v33UOc07AY7qemM2Cx48F6hroEAotB3FhkKd/DxZPisyiu4yNF5UDzMsOgaP6vg5gay/Ce4A5ucXekqTwbGjOGIQ+in/CKArmJOl0eF8U/0ow6Xyc9CH6USgJG9Lv1hM028e54Wv/f29dZbosxR1ys53HI4YW6wCBbLPurkQO0hb+e5Xrp3aFsueFSV2pKAsmrQB+/QIARBVy/k1Lwb5b7C+fFIg7u6yB31/+l4dVJGWUZbSWw15M6OwqrrogrIrkAKU4vjwdh3KzRcdSFG1ivCwBQMClzC6t7E9MwZcFmnfcjYxj7FjdO1Ca5iBlWQt3++94j6LXPUivDF2Eip0eqfGK7wDVsoWzkzbdqOemJOg1gJG5M++MAQX00/3qSycEvCMY1wgOSKln/15bksvNoLiAUJCtPWw2qAX6JDPzxprJvPw/JGkqHnrpj94zZHHG0kRKxswmSOCwWl9SxUUXJ2yDVhd24WlnZzYvLmVB6hbKjFUTtjVjziqlt9BmBGHNkxGPOglPFwPE+nDRe2ZqHqZLJBVYcmacijFw5xOBEPtTcfjKKS22IgMhGypNlfalt8Q+qcHpfdsbk0DK/M="
before_install:
- chmod +x configure.hs
- ./configure.hs
script:
- cabal configure --enable-tests --enable-library-coverage && cabal build && cabal test
after_script:
- mkdir codecov && cd codecov && cabal sandbox init && cabal install codecov-haskell && cd ..
- mv dist/hpc/vanilla/* dist/hpc/
- codecov/.cabal-sandbox/bin/codecov-haskell main --token=$CODECOV_TOKEN
before_deploy:
- chmod +x configure.hs
- ./configure.hs
deploy:
  provider: hackage
  username: emink
  skip_cleanup: true
  password:
    secure: Q5ZdRPAZCmRa5UTXYmHXpACXcxtfBTNcjqiTXOyOFJLVmClin0pET3n8Dtb+6ZH2xjl5jda6dWTgGivKH82u7F9SZSUsLotEW6CjbNoNesmhU41ZGew1w3G/S6z+U81Nd4m0kLmcZHaUVgOv5Ist3Z8qP+oB65K14QM675MwVCoP6CMUmamYkMKGwa9uJq5eS/DZS5NG8npD6+NNrWSc96PfdTjxhCJpC/ZsWijzFIWkm6AXDwGPQC2hJ7fjig1ecs+H2jwvtIVSsuFvENm1Tf0zsgK66gkvRNJy4Id6QvNHmCllwE0TpfJRSX3TQMSI90RbHhp0JYrn+bwM4WHK5n2B6fIkDp1gBuFr6ASSUl4jNqj3eIuzAj1BJvGrRTK5xd6vnfkHoXUaSr7VQeCrjyU2LEYmbTU8uOFQeFT/yRDwrAfC7cOcAjVqyKRsqsk/zQE2HzSmUY9FcnUZ2Jmlw0ozNA3LyFEHJn82ZusTaoz8Vqi0sc8qERW+glkm8Z+rJwXmrewXIXR7rRZeuYr03LRQbDBB2LLyYBKNwFZ5g9UUPPuJZK/licSqJud91xiYcPXlg9/n/+L5g1Iv1IQvXfNxq568CiAsccuu5SOYgZnGnjR0k7l+aX7MWWmExaCz3DWKGyMTknvYPAr9HzyzmhJB6CetG3X/dzdenRPmX9g=
  on:
    tags: true
